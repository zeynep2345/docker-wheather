<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Weather App (Open Meteo)</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            background: #f0f4f8;
            margin: 20px;
        }
        h1 {
            text-align: center;
            color: #333;
        }
        label, input, button {
            display: block;
            margin: 10px auto;
            text-align: center;
        }
        input {
            padding: 8px;
            width: 300px;
            border-radius: 5px;
            border: 1px solid #ccc;
        }
        button {
            padding: 8px 16px;
            border: none;
            background-color: #3498db;
            color: white;
            border-radius: 5px;
            cursor: pointer;
        }
        button:hover {
            background-color: #2980b9;
        }
        .cards-container {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            margin-top: 20px;
            gap: 15px;
        }
        .card {
            background-color: white;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
            padding: 15px;
            width: 200px;
            text-align: center;
        }
        .card h3 {
            margin: 0 0 10px;
            color: #333;
        }
        .card p {
            margin: 5px 0;
            color: #555;
        }
        .error {
            color: red;
        }
    </style>
</head>
<body>
    <h1>Weather App (Open Meteo)</h1>

    <label>Şehir adı (virgülle ayırarak birden fazla girebilirsiniz):</label>
    <input id="city" placeholder="İstanbul, Ankara, İzmir">
    <button onclick="getWeather()">Getir</button>

    <div class="cards-container" id="result"></div>

    <script>
    async function getWeather() {
        const citiesInput = document.getElementById('city').value;
        const resultEl = document.getElementById('result');
        resultEl.innerHTML = ''; // Önceki sonuçları temizle

        if (!citiesInput) {
            resultEl.innerHTML = '<p class="error">Lütfen en az bir şehir adı girin.</p>';
            return;
        }

        const cities = citiesInput.split(',').map(c => c.trim()).filter(c => c.length > 0);

        for (let city of cities) {
            try {
                const geoResponse = await fetch(`https://geocoding-api.open-meteo.com/v1/search?name=${encodeURIComponent(city)}`);
                const geoData = await geoResponse.json();

                if (!geoData.results || geoData.results.length === 0) {
                    const errorCard = document.createElement('div');
                    errorCard.className = 'card';
                    errorCard.innerHTML = `<h3>${city}</h3><p class="error">Şehir bulunamadı.</p>`;
                    resultEl.appendChild(errorCard);
                    continue;
                }

                const { latitude, longitude, name } = geoData.results[0];

                const weatherResponse = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=${latitude}&longitude=${longitude}&current_weather=true`);
                const weatherData = await weatherResponse.json();

                const temp = weatherData.current_weather.temperature;
                const wind = weatherData.current_weather.windspeed;

                const card = document.createElement('div');
                card.className = 'card';
                card.innerHTML = `
                    <h3>${name}</h3>
                    <p>Sıcaklık: ${temp}°C</p>
                    <p>Rüzgar Hızı: ${wind} km/h</p>
                `;
                resultEl.appendChild(card);

            } catch (error) {
                console.error(error);
                const errorCard = document.createElement('div');
                errorCard.className = 'card';
                errorCard.innerHTML = `<h3>${city}</h3><p class="error">Hava durumu alınamadı.</p>`;
                resultEl.appendChild(errorCard);
            }
        }
    }
    </script>
</body>
</html>
